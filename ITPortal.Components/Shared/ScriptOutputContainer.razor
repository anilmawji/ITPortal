@implements IDisposable

@for (int i = 0; i < OutputCollection?.Output.Count; i++)
{
    ScriptOutputMessage psMessage = OutputCollection.Output[i];

    <div class="@psMessage.Stream">
        @(psMessage.Data)
    </div>
}

@code {
    [Parameter, EditorRequired]
    public ScriptOutputCollection? OutputCollection { get; set; }

    protected override void OnInitialized()
    {
        if (OutputCollection != null)
        {
            OutputCollection.OnOutputChanged += (object? sender, ScriptOutputChangedEventArgs _) =>
            {
                InvokeAsync(() => this.StateHasChanged());
            };
        }
    }

    public void Dispose()
    {
        OutputCollection?.DisposeOnOutputChangedEventSubscriptions();
    }
}
